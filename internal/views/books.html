{{ define "title" }}Books{{ end }}

{{ define "content" }}
<h1>Books of New York Times</h1>

<div style="margin: 20px 0; text-align: center;">
    <label for="sort">Sort by: </label>
    <select id="sort" onchange="window.location.href='/books?sort=' + this.value" style="padding: 5px 10px; font-size: 14px;">
        <option value="rank" {{if eq .SortBy "rank"}}selected{{end}}>Rank</option>
        <option value="title" {{if eq .SortBy "title"}}selected{{end}}>Title (A-Z)</option>
        <option value="author" {{if eq .SortBy "author"}}selected{{end}}>Author (A-Z)</option>
    </select>
</div>

<div class="cont">
    <div class="book">
        {{range .Books}}
        <div class="book_cont" onclick="window.location.href='/book/{{.ID}}'">
            <div class="img_cont">
                <img src="{{.Image}}" alt="{{.Title}}">
            </div>
            <p class="book_title">{{.Title}}</p>
            <p class="book_author">Author – {{.Author}}</p>
            <p class="book_publisher">Publisher – {{.Publisher}}</p>
            <p class="book_rank">Rank – {{.Rank}}</p>
        </div>
        {{end}}
    </div>
    <div class="books_pagination">
        {{ if gt .Pages 1 }}
            {{ if gt .Page 1 }}
                <a href="/books?page=1&sort={{.SortBy}}" class="pag_word"><<</a>
                <a href="/books?page={{minus .Page 1}}&sort={{.SortBy}}" class="pag_word"><</a>
            {{ end }}

            {{ range $p := smartPages .Page .Pages }}
                <a href="/books?page={{$p}}&sort={{$.SortBy}}"
                   class="pag_num"
                   style="{{if eq $.Page $p}} font-weight:bold; font-size:18px;{{end}}">
                    {{$p}}
                </a>
            {{ end }}

            {{ if lt .Page .Pages }}
                <a href="/books?page={{add .Page 1}}&sort={{.SortBy}}" class="pag_word">></a>
                <a href="/books?page={{.Pages}}&sort={{.SortBy}}" class="pag_word">>></a>
            {{ end }}
        {{ end }}
    </div>
</div>
{{ end }}
